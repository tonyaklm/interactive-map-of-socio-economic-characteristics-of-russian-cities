<!DOCTYPE html>
<html>
<head>
    <title>Folium Map with Dropdown</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <style>
        .label {
            margin-top: 8px;
            font-size: 25px;
            color: teal;
            border-radius:6px;
        }

        #map {
            height: 550px;
            width: 90%;
        }

        .label_shape {
            border: 1px solid #999;
            margin-top: 50px;
            margin-bottom: 10px;
            margin-left: 10px;
        }

        .dropdown_shape {
            border: 1px solid #999;
            margin-top: 50px;
            margin-bottom: 10px;
            margin-right: 10px;
        }

<!--        #dropdown {-->
<!--              width: 200px;-->
<!--              height: 25px;-->
<!--              border: 1px solid #999;-->
<!--              font-size: 18px;-->
<!--              color: grey;-->
<!--              background-color: #eee;-->
<!--              margin-top: 50px;-->
<!--              margin-bottom: 10px;-->
<!--        }-->
        #myIframe {
<!--            margin-top: 70px;-->
        }
        #timelabel_before {
              font-size: 25px;
              color: teal;
              margin-top: 50px;
              margin-bottom: 10px;
              padding-left: 8%;
        }
        .time_label {
            width: 185px;
            height: 40px;
            border: 1px solid #999;
            margin-top: 35px;
            margin-bottom: 10px;
            margin-left: 10px;
        }

        .first_time {
            width: 450px;
            height: 40px;
            border: 1px solid #999;
            margin-top: 35px;
            margin-bottom: 10px;
            border-radius:6px;
        }

        #time_before {
              width: 200px;
              height: 25px;
              border: 1px solid #999;
              font-size: 18px;
              color: grey;
              background-color: #eee;
              margin-top: 50px;
              margin-bottom: 10px;
              border-radius:6px;
        }

        #timelabel_after {
              font-size: 25px;
              color: teal;
        }

        .second_time {
              width: 450px;
              height: 40px;
              border: 1px solid #999;
              margin-top: 35px;
              margin-bottom: 10px;
              border-radius:6px;
              border-radius:6px;
        }

        #time_after {
               width: 200px;
              height: 25px;
              border: 1px solid #999;
              font-size: 18px;
              color: grey;
              background-color: #eee;
              margin-top: 50px;
              margin-bottom: 10px;
              border-radius:6px;
        }

        .submit {
            height: 40px;
            border: 1px solid #999;
            margin-top: 35px;
            margin-bottom: 10px;
            border-radius:6px;
            margin-right: 10px;
            margin-left: 2px;
        }

        .btn-group {
            position: absolute;
            top: 10px; /* Расстояние от верхнего края страницы */
            left: 10px; /* Расстояние от правого края страницы */
        }
        #button ul {
          list-style-type: none;
          /* Remove the bullets from the list */
        }

        #button .top {
          background-color: #DDD;
          text-align: center;
          /* The button background */
        }

        #button ul li.item {
          display: none;
          /* By default, do not display the items (which contains the links) */
        }

        #button ul:hover .item {
          /* When the user hovers over the button (or any of the links) */
          display: block;
          border: 1px solid white;
          background-color: #DDD;
        }




    </style>
</head>
<body>
<!--<h1>-->
<h1 align="center" class="lead label">Интерактивная карта социально-экономических индикаторов городов
    России</h1>
<header>
    <div class="btn-group">
        <button type="button" class="btn btn-primary">Меню</button>
        <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
        </button>
        <div class="dropdown-menu">
            <a class="dropdown-item" href="http://192.168.1.8:8006/login/">Войти</a>
            <a class="dropdown-item" href="#">Графики</a>
            <a class="dropdown-item" href="/upload_data/">Загрузить данные</a>
            <a class="dropdown-item" href="#">Инструкция</a>
            <a class="dropdown-item" href="http://192.168.1.8:8006/register/">Добавить пользователя</a>
        </div>
    </div>
</header>
<!--    <div id="button">-->
<!--        <ul>-->
<!--            <li class="top">Меню</li>-->
<!--            <li class="item"><a href="/login/">Войти</a></li>-->
<!--            <li class="item"><a href=""></a>Графики</li>-->
<!--            <li class="item"><a href="/create">Загрузить данные</a></li>-->
<!--            <li class="item"><a href="">Инструкция</a></li>-->
<!--            <li class="item"><a href="/register/">Добавить пользователя</a></li>-->
<!--        </ul>-->
<!--    </div>-->

<form action="/map/indicator" method="get">
    <div class="input-group mb-3">
        <label class="input-group-text label_shape" for="inputGroupSelect01" style="color:teal">Выберите
            индикатор</label>
        <select class="custom-select dropdown_shape" id="inputGroupSelect01" name="indicator"
                onchange="this.form.submit()">
            <option selected value="Empty Map">Empty Map</option>
            <option value="Population">Population</option>
            <option value="Children">Children</option>
        </select>
    </div>
    <input type="submit" id="submit" value="Submit">
</form>

</h1>

<div id="loading" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;">
    <img src="../static/images/loader.gif" alt="Loading..."
         style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
</div>

<script type="text/javascript">
      function hideLoading() {
           document.getElementById("loading").style.display = "none";
      }

</script>

<!--<iframe id="myIframe" class="map" src={{template_name}} width="100.0%" height="650" frameborder="1"-->
<!--        onload="window.parent.hideLoading();">-->
<!--</iframe>-->


<!--<div class="input-group mb-3">-->
<!--    <label class="input-group-text time_label" for="time-form" style="color:teal">Введите года</label>-->
<!--    <input required type="text" id="time-form" class="form-control first_time" name="time_before" placeholder="с"-->
<!--           aria-label="First date">-->
<!--    <input required type="text" class="form-control second_time" name="time_after" placeholder="по"-->
<!--           aria-label="Last date">-->
<!--    <input class="btn btn-primary submit" type="submit" id="submit" value="Submit">-->
<!--</div>-->

</form>


<iframe id="myIframe" class="map" src={{template_name}} width="100.0%" height="650" frameborder="1"
        onload="window.parent.hideLoading();"></iframe>
<h3><b style="background-color: lightcoral; color: lightcyan;">
</b></h3>

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

</body>

<script>

    var columns = {{ columns|tojson }};
    var groups = {{ groups|tojson }};
    addOptions(columns, groups);

    function addOptions(columns, groups) {
        var dropdown = document.getElementById("inputGroupSelect01");

        columns.forEach(function(option, index) {
            var newOption = document.createElement("option");
            newOption.text = option;
            newOption.value = option;

            var groupName = groups[index];
            var optgroup = dropdown.querySelector('optgroup[label="' + groupName + '"]');
            if (!optgroup) {
                optgroup = document.createElement('optgroup');
                optgroup.label = groupName;
                dropdown.appendChild(optgroup);
            }
            optgroup.appendChild(newOption);
        });
    }




</script>

</html>



